# GNTECH Solutions - Jellyfin Backup Configuration
# This file contains configuration settings for the Jellyfin backup script

#############################################################################
#                         GNTECH Solutions                                 #
#                    Backup Configuration File                             #
#############################################################################

# Container Management Settings
STOP_CONTAINER_FOR_BACKUP=true
CONTAINER_STOP_TIMEOUT=30
CONTAINER_HEALTH_CHECK_TIMEOUT=60

# Backup Settings
# Note: BACKUP_BASE_DIR will be automatically set to $HOME/jellyfin-backups
# You can override this by uncommenting and setting a custom path:
# BACKUP_BASE_DIR="/custom/backup/path"

BACKUP_RETENTION_DAYS=3
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Health Check Settings
HEALTH_CHECK_ENABLED=true
MIN_FREE_SPACE_GB=5
WARN_FREE_SPACE_GB=10
CHECK_SYSTEM_LOAD=true
MAX_SYSTEM_LOAD=5.0

# Verification Settings
CREATE_CHECKSUMS=true
VERIFY_AFTER_BACKUP=true
CREATE_BACKUP_REPORT=true

# Logging Settings
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_MAX_SIZE="100M"
LOG_ROTATION_COUNT=5

# Container Discovery Settings
CONTAINER_NAME_PATTERN="jellyfin"
CONTAINER_IMAGE_PATTERN="jellyfin/jellyfin"

# Exclude Patterns (one per line, supports wildcards)
EXCLUDE_PATTERNS=(
    "*/logs/*"
    "*/cache/*"
    "*/transcodes/*"
    "*/temp/*"
    "*/tmp/*"
    "/mnt/*"
    "*.log"
    "*.tmp"
    "*.lock"
    "*/.cache/*"
    "*/node_modules/*"
)

# Rsync Options
RSYNC_OPTIONS=(
    "--archive"
    "--verbose"
    "--progress"
    "--delete"
    "--partial"
    "--inplace"
    "--compress"
)

# Notification Settings
ENABLE_EMAIL_NOTIFICATIONS=false
EMAIL_SMTP_SERVER="smtp.gmail.com"
EMAIL_SMTP_PORT=587
EMAIL_FROM="backup@gntech-solutions.com"
EMAIL_TO="admin@yourcompany.com"
EMAIL_SUBJECT="GNTECH Jellyfin Backup Report"

# Webhook Notifications
ENABLE_WEBHOOK_NOTIFICATIONS=false
WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"

# Security Settings
BACKUP_ENCRYPTION=false
ENCRYPTION_KEY_PATH="/etc/gntech/backup.key"
SECURE_DELETE=true

# Performance Settings
MAX_PARALLEL_BACKUPS=2
BANDWIDTH_LIMIT=""  # Empty for no limit, or specify like "10M" for 10MB/s

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_URL="https://hc-ping.com/your-uuid-here"

# Custom Script Hooks
PRE_BACKUP_SCRIPT=""
POST_BACKUP_SCRIPT=""
BACKUP_FAILURE_SCRIPT=""

# Docker Settings
DOCKER_SOCKET="/var/run/docker.sock"
DOCKER_API_VERSION="auto"

# Advanced Settings
VERIFY_BACKUP_INTEGRITY=true
CREATE_BACKUP_MANIFEST=true
BACKUP_METADATA=true
JELLYFIN_METADATA_CHECK=true
METADATA_INTEGRITY_CHECK=true
